tasks:
  - name: Pip install
    init: pip3 install -r requirements/test.txt && gp sync-done pip
  - name: Generate Data
    init: gp sync-await pip
    command: python python/generate_events.py
  - name: Setup DB
    init: psql -f sql/setup_db.sql && gp sync-done db-setup
  - name: Insert Data
    init: sync-await db-setup
    command: psql -c "\copy website_visits from 'data/website_data.csv' DELIMITER ',' CSV HEADER"

image: gitpod/workspace-postgres

vscode:
  extensions:
    - ms-python.python
    - ms-toolsai.jupyter
    - ms-toolsai.jupyter-keymap
    - ms-toolsai.jupyter-renderers
